LIB.namespace("ADLIB.discountcode"),function(n){"use strict";function f(r){var u;r=n.trim(r);u=n(r).filter("#"+t.attr("id"));u.length===0?i.hide():(t.replaceWith(u),t=n("#discount-code"),i=n(".js-discount-code"),i.show())}function h(){u=n("#DiscountCode").val();ADLIB.cart.setDiscountCode(u);ADLIB.cart.submit()}function c(){t.append(r);LIB.ajax.partial(e,{dataType:"html",data:t.serialize(),type:o}).done(function(n){n===""?h():f(n);t.remove(r)}).fail(function(){t.remove(r)})}var t=n("#discount-code"),i=n(".js-discount-code"),e=t.attr("action"),r=n('<div class="spinner-overlay" />'),o=t.attr("method"),u,s=_.once(function(){new Spinner({color:"#3a3a3a",radius:8,length:8,width:4,lines:9}).spin(r[0])});i.on("submit","form",function(n){n.preventDefault();s();c()});ADLIB.discountcode={redraw:f}}(jQuery)