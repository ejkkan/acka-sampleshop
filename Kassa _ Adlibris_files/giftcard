LIB.namespace("ADLIB.giftcard"),function(n){"use strict";function o(r){var u;r=n.trim(r);u=n(r).filter("#"+t.attr("id"));u.length===0?i.hide():(t.replaceWith(u),t=n("#gift-card"),i=n(".js-gift-card"),i.show())}function c(){f=n("#CardId").val();e=n("#Pin").val();ADLIB.cart.setGiftCard(f,e);ADLIB.cart.submit()}function l(){t.append(r);LIB.ajax.partial(s,{dataType:"html",data:t.serialize(),type:h}).done(function(n){n===""?c():o(n);t.remove(r)}).fail(function(){t.remove(r)})}var t=n("#gift-card"),i=n(".js-gift-card"),s=t.attr("action"),h=t.attr("method"),r=n('<div class="spinner-overlay" />'),u,f,e;u=_.once(function(){new Spinner({color:"#3a3a3a",radius:8,length:8,width:4,lines:9}).spin(r[0])});i.on("submit","form",function(n){n.preventDefault();u();l()});ADLIB.giftcard={redraw:o}}(jQuery)